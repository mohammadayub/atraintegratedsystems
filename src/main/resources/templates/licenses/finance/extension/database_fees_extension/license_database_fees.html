<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:replace="~{layout :: page_head}">
    <div th:replace="styles :: data-tables-styles"></div>
    <div th:replace="styles :: persian-datepicker-styles"></div>
    <div th:replace="styles :: select2-styles"></div>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">
    <title>LMIS</title>
    <style>
        body {
            background-color: #f9f9f9;
        }
        .table-container {
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            background-color: #f9f9f9;
        }
        #profileTable, #extensionTable {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        #profileTable th, #profileTable td, #extensionTable th, #extensionTable td {
            padding: 6px;
            text-align: center;
            vertical-align: middle;
            font-size: 0.8em;
        }
        #profileTable thead th, #extensionTable thead th {
            color: white;
            font-size: 16px;
        }
        #profileTable tbody tr:nth-child(even), #extensionTable tbody tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        #profileTable td a.btn-primary, #extensionTable td a.btn-primary {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 4px;
        }
        #profileTable th, #extensionTable th {
            white-space: nowrap;
        }
    </style>
</head>
<body>
<nav th:replace="~{layout :: page_navbar}"></nav>
<h4 class="mt-4">License Extension Finance Section</h4>
<div class="table-container">
    <table border="1" class="table table-bordered" id="profileTable">
        <thead>
        <tr class="bg-primary">
            <th>Id</th>
            <th>Approval Id</th>
            <th>Approval Date</th>
            <th>Company Name</th>
            <th>License Type</th>
            <th>Extend Start</th>
            <th>Extend Expire Date</th>
            <th>Database Fees</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="extension : ${profiles}">
            <td th:text="${extension.id}"></td>
            <td th:text="${extension.licenseApproval.approvalId}"></td>
            <td th:text="${extension.licenseApproval.getAppDate()}"></td>
            <td th:text="${extension.licenseApproval.licenseApplicant.companyLicenseName}"></td>
            <td th:text="${extension.licenseApproval.licenseType.name}"></td>
            <td th:text="${extension.getExtentStartDate()}"></td>
            <td th:text="${extension.getExtentExpDate()}"></td>
            <td th:text="${extension.extensionDatabaseFees}"></td>

        </tr>
        </tbody>
    </table>
</div>
<div th:replace="scripts :: common-scripts"></div>
<div th:replace="scripts :: persian-datepicker-scripts"></div>
<div th:replace="scripts :: data-tables-scripts"></div>
<!--Taking Approval Id and Fees-->
<script>
    $('.hijrishamsi').persianDatepicker({
        format: 'YYYY-MM-DD',
        autoClose: true,
        initialValue: false,
        calendar: {
            persian: {
                locale: 'en'
            }
        }
    });
</script>

<script>
    $(document).ready(function () {
         // Initialize DataTable with individual column search
         let table = $('#profileTable').DataTable({
             initComplete: function () {
                 this.api().columns().every(function () {
                     var column = this;
                     var header = $(column.header());
                     var columnText = header.text(); // Get the existing header text
                     header.empty().append('<div>' + columnText + '</div>'); // Keep the header text and add a wrapper

                     // Append the search input below the header text
                     $('<input type="text" placeholder="Search" style="width: 100%; margin-top: 5px;"/>')
                         .appendTo(header)
                         .on('keyup change clear', function () {
                             if (column.search() !== this.value) {
                                 column
                                     .search(this.value)
                                     .draw();
                             }
                         });
                 });
             }
         });
     });

</script>
<footer th:replace="~{layout :: page_footer}"></footer>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
