<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:replace="~{layout :: page_head}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap" />

    <!-- DataTables + Buttons CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">

    <!-- Thymeleaf fragment styles -->
    <div th:replace="styles :: data-tables-styles"></div>
    <div th:replace="styles :: select2-styles"></div>
    <title>TAC Numbers List</title>

    <style>
        body {
            background-color: #f5f5f5;
            font-family: 'EB Garamond', serif;
            font-weight: bold;
        }

        .table-container {
            border: 1px solid #ddd;
            margin-top: 15px;
        }

        #tacTable {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }

        #tacTable th, #tacTable td {
            padding: 6px;
            text-align: center;
            vertical-align: middle;
            font-size: 0.8em;
        }

        #tacTable thead th {
            color: white;
            font-size: 14px;
        }

        #tacTable tbody tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #tacTable th {
            white-space: nowrap;
        }

        @media (max-width: 768px) {
            #tacTable th, #tacTable td {
                font-size: 0.7em;
                padding: 4px;
            }
        }

        .btn.btn-success {
            margin-top: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<nav th:replace="~{typeofApproval_layout :: page_navbar}"></nav>

<div class="container-fluid mt-4">
    <fieldset>
        <legend>TAC Numbers with Manufacturer Details</legend>
        <div class="table-container">
            <table class="table table-bordered" id="tacTable">
                <thead class="bg-primary">
                <tr>
                    <th>ID</th>
                    <th>Company Name</th>
                    <th>Authorized Importer</th>
                    <th>Contact Person</th>
                    <th>Address</th>
                    <th>P.O. Box</th>
                    <th>Telephone</th>
                    <th>Mobile</th>
                    <th>Email</th>
                    <th>TAC No</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="row : ${tacNumbers}">
                    <td th:text="${row[0] ?: 'N/A'}"></td>
                    <td th:text="${row[3] ?: 'N/A'}"></td>
                    <td th:text="${row[4] ?: 'N/A'}"></td>
                    <td th:text="${row[5] ?: 'N/A'}"></td>
                    <td th:text="${row[6] ?: 'N/A'}"></td>
                    <td th:text="${row[7] ?: 'N/A'}"></td>
                    <td th:text="${row[8] ?: 'N/A'}"></td>
                    <td th:text="${row[9] ?: 'N/A'}"></td>
                    <td th:text="${row[10] ?: 'N/A'}"></td>
                    <td th:text="${row[1] ?: 'N/A'}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </fieldset>
</div>

<!-- Script Fragments -->
<div th:replace="scripts :: common-scripts"></div>

<!-- JS Libraries -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<style>
    /* Google-style pagination */
    .dataTables_wrapper .dataTables_paginate {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 15px;
        font-family: 'EB Garamond', serif;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button {
        border: none !important;
        background: none !important;
        padding: 6px 12px;
        margin: 0 2px;
        cursor: pointer;
        border-radius: 50%;
        font-weight: bold;
        color: #007bff !important;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
        background-color: #007bff !important;
        color: white !important;
        border-radius: 50%;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
        background-color: #e9ecef !important;
        color: #007bff !important;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.disabled {
        color: #ccc !important;
        cursor: not-allowed;
    }
</style>

<script>
    $(document).ready(function () {
        let table = $('#tacTable').DataTable({
            dom: '<"top"Bf><"after-search"l>rt<"bottom"ip><"clear">',
            pagingType: "simple_numbers",
            lengthMenu: [10, 25, 50, 100],
            pageLength: 10,
            buttons: [
                {
                    extend: 'excelHtml5',
                    text: 'Export to Excel',
                    className: 'btn btn-success'
                },
                {
                    text: 'Print Table',
                    className: 'btn btn-success',
                    action: function () {
                        let tableContent = document.getElementById("tacTable").outerHTML;
                        let printWindow = window.open('', '', 'height=700,width=900');
                        printWindow.document.write('<html><head><title>Print TAC Numbers</title>');
                        printWindow.document.write(`
                            <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
                            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
                            <style>
                                table { width: 100%; border-collapse: collapse; }
                                th, td { text-align: center; padding: 6px; font-size: 12px; border: 1px solid #ddd; }
                                th { background-color: #007bff; color: white; }
                            </style>
                        `);
                        printWindow.document.write('</head><body>');
                        printWindow.document.write('<h3 style="text-align:center; margin-bottom:15px;">TAC Numbers with Manufacturer Details</h3>');
                        printWindow.document.write(tableContent);
                        printWindow.document.write('</body></html>');
                        printWindow.document.close();
                        printWindow.print();
                    }
                }
            ]
        });

        // Optional: style the dropdown row
        $(".after-search").css({
            "margin-top": "10px",
            "margin-bottom": "10px"
        });
    });
</script>




<div style="height:10vh;"></div>
<footer th:replace="~{layout :: page_footer}"></footer>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
